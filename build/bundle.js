var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function i(t){t.forEach(n)}function r(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e}function a(t,e,n,o){if(t){const i=c(t,e,n,o);return t[0](i)}}function c(t,e,n,o){return t[1]&&o?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](o(e))):n.ctx}function u(t,e,n,o){if(t[2]&&o){const i=t[2](o(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|i[o];return t}return e.dirty|i}return e.dirty}function d(e){return e&&r(e.destroy)?e.destroy:t}const f="undefined"!=typeof window;let h=f?()=>window.performance.now():()=>Date.now(),p=f?t=>requestAnimationFrame(t):t;const g=new Set;function m(t){g.forEach(e=>{e.c(t)||(g.delete(e),e.f())}),0!==g.size&&p(m)}function w(t,e){t.appendChild(e)}function y(t,e,n){t.insertBefore(e,n||null)}function v(t){t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function b(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t){return document.createTextNode(t)}function E(){return $(" ")}function L(){return $("")}function k(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function H(t){return function(e){return e.preventDefault(),t.call(this,e)}}function S(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t){return""===t?void 0:+t}function z(t,e){e=""+e,t.data!==e&&(t.data=e)}function F(t,e){(null!=e||t.value)&&(t.value=e)}function C(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function M(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function j(t,e,n){t.classList[n?"add":"remove"](e)}function P(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}const T=new Set;let R,A=0;function D(t,e,n,o,i,r,l,s=0){const a=16.666/o;let c="{\n";for(let t=0;t<=1;t+=a){const o=e+(n-e)*r(t);c+=100*t+`%{${l(o,1-o)}}\n`}const u=c+`100% {${l(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${s}`,f=t.ownerDocument;T.add(f);const h=f.__svelte_stylesheet||(f.__svelte_stylesheet=f.head.appendChild(x("style")).sheet),p=f.__svelte_rules||(f.__svelte_rules={});p[d]||(p[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?g+", ":""}${d} ${o}ms linear ${i}ms 1 both`,A+=1,d}function I(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-o.length;i&&(t.style.animation=o.join(", "),A-=i,A||p(()=>{A||(T.forEach(t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}}),T.clear())}))}function N(t){R=t}function W(){if(!R)throw new Error("Function called outside component initialization");return R}function B(t){W().$$.on_mount.push(t)}function O(){const t=W();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const i=P(e,n);o.slice().forEach(e=>{e.call(t,i)})}}}function X(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(t=>t(e))}const Y=[],G=[],U=[],J=[],Z=Promise.resolve();let V=!1;function q(t){U.push(t)}let Q=!1;const K=new Set;function tt(){if(!Q){Q=!0;do{for(let t=0;t<Y.length;t+=1){const e=Y[t];N(e),et(e.$$)}for(Y.length=0;G.length;)G.pop()();for(let t=0;t<U.length;t+=1){const e=U[t];K.has(e)||(K.add(e),e())}U.length=0}while(Y.length);for(;J.length;)J.pop()();V=!1,Q=!1,K.clear()}}function et(t){if(null!==t.fragment){t.update(),i(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(q)}}let nt;function ot(t,e,n){t.dispatchEvent(P(`${e?"intro":"outro"}${n}`))}const it=new Set;let rt;function lt(){rt={r:0,c:[],p:rt}}function st(){rt.r||i(rt.c),rt=rt.p}function at(t,e){t&&t.i&&(it.delete(t),t.i(e))}function ct(t,e,n,o){if(t&&t.o){if(it.has(t))return;it.add(t),rt.c.push(()=>{it.delete(t),o&&(n&&t.d(1),o())}),t.o(e)}}const ut={duration:0};function dt(n,o,l,s){let a=o(n,l),c=s?0:1,u=null,d=null,f=null;function w(){f&&I(n,f)}function y(t,e){const n=t.b-c;return e*=Math.abs(n),{a:c,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(o){const{delay:r=0,duration:l=300,easing:s=e,tick:v=t,css:x}=a||ut,b={start:h()+r,b:o};o||(b.group=rt,rt.r+=1),u?d=b:(x&&(w(),f=D(n,c,o,l,r,s,x)),o&&v(0,1),u=y(b,l),q(()=>ot(n,o,"start")),function(t){let e;0===g.size&&p(m),new Promise(n=>{g.add(e={c:t,f:n})})}(t=>{if(d&&t>d.start&&(u=y(d,l),d=null,ot(n,u.b,"start"),x&&(w(),f=D(n,c,u.b,u.duration,0,s,a.css))),u)if(t>=u.end)v(c=u.b,1-c),ot(n,u.b,"end"),d||(u.b?w():--u.group.r||i(u.group.c)),u=null;else if(t>=u.start){const e=t-u.start;c=u.a+u.d*s(e/u.duration),v(c,1-c)}return!(!u&&!d)}))}return{run(t){r(a)?(nt||(nt=Promise.resolve(),nt.then(()=>{nt=null})),nt).then(()=>{a=a(),v(t)}):v(t)},end(){w(),u=d=null}}}const ft="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function ht(t,e){ct(t,1,1,()=>{e.delete(t.key)})}function pt(t,e,n,o,i,r,l,s,a,c,u,d){let f=t.length,h=r.length,p=f;const g={};for(;p--;)g[t[p].key]=p;const m=[],w=new Map,y=new Map;for(p=h;p--;){const t=d(i,r,p),s=n(t);let a=l.get(s);a?o&&a.p(t,e):(a=c(s,t),a.c()),w.set(s,m[p]=a),s in g&&y.set(s,Math.abs(p-g[s]))}const v=new Set,x=new Set;function b(t){at(t,1),t.m(s,u,l.has(t.key)),l.set(t.key,t),u=t.first,h--}for(;f&&h;){const e=m[h-1],n=t[f-1],o=e.key,i=n.key;e===n?(u=e.first,f--,h--):w.has(i)?!l.has(o)||v.has(o)?b(e):x.has(i)?f--:y.get(o)>y.get(i)?(x.add(o),b(e)):(v.add(i),f--):(a(n,l),f--)}for(;f--;){const e=t[f];w.has(e.key)||a(e,l)}for(;h;)b(m[h-1]);return m}function gt(t){t&&t.c()}function mt(t,e,o){const{fragment:l,on_mount:s,on_destroy:a,after_update:c}=t.$$;l&&l.m(e,o),q(()=>{const e=s.map(n).filter(r);a?a.push(...e):i(e),t.$$.on_mount=[]}),c.forEach(q)}function wt(t,e){const n=t.$$;null!==n.fragment&&(i(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(t,e){-1===t.$$.dirty[0]&&(Y.push(t),V||(V=!0,Z.then(tt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function vt(e,n,r,l,s,a,c=[-1]){const u=R;N(e);const d=n.props||{},f=e.$$={fragment:null,ctx:null,props:a,update:t,not_equal:s,bound:o(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:o(),dirty:c};let h=!1;if(f.ctx=r?r(e,d,(t,n,...o)=>{const i=o.length?o[0]:n;return f.ctx&&s(f.ctx[t],f.ctx[t]=i)&&(f.bound[t]&&f.bound[t](i),h&&yt(e,t)),n}):[],f.update(),h=!0,i(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(v)}else f.fragment&&f.fragment.c();n.intro&&at(e.$$.fragment),mt(e,n.target,n.anchor),tt()}N(u)}class xt{$destroy(){wt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function bt(t){const e=t-1;return e*e*e+1}function $t(t,{delay:e=0,duration:n=400,easing:o=bt,x:i=0,y:r=0,opacity:l=0}){const s=getComputedStyle(t),a=+s.opacity,c="none"===s.transform?"":s.transform,u=a*(1-l);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*i}px, ${(1-t)*r}px);\n\t\t\topacity: ${a-u*e}`}}class Et extends xt{constructor(t){super(),vt(this,t,null,null,l,{})}}function Lt(e){let n,o;return{c(){n=x("div"),o=x("canvas"),S(o,"class","max-w-full"),C(o,"width",e[1]+"px"),S(o,"width",e[1]),S(o,"height",e[2])},m(t,i){y(t,n,i),w(n,o),e[9](o)},p(t,[e]){2&e&&C(o,"width",t[1]+"px"),2&e&&S(o,"width",t[1]),4&e&&S(o,"height",t[2])},i:t,o:t,d(t){t&&v(n),e[9](null)}}}function kt(t,e,n){let{page:o}=e;const i=O();let r,l,s;function a(){i("measure",{scale:r.clientWidth/l})}async function c(){const t=await o,e=r.getContext("2d"),i=t.getViewport({scale:1,rotation:0});n(1,l=i.width),n(2,s=i.height),await t.render({canvasContext:e,viewport:i}).promise,a(),window.addEventListener("resize",a)}var u;return B(c),u=()=>{window.removeEventListener("resize",a)},W().$$.on_destroy.push(u),t.$set=t=>{"page"in t&&n(3,o=t.page)},[r,l,s,o,i,void 0,void 0,a,c,function(t){G[t?"unshift":"push"](()=>{n(0,r=t)})}]}class Ht extends xt{constructor(t){super(),vt(this,t,kt,Lt,l,{page:3})}}function St(t){let e,n;function o(o){e=o.clientX,n=o.clientY;const l=o.target;t.dispatchEvent(new CustomEvent("panstart",{detail:{x:e,y:n,target:l}})),window.addEventListener("mousemove",i),window.addEventListener("mouseup",r)}function i(o){const i=o.clientX-e,r=o.clientY-n;e=o.clientX,n=o.clientY,t.dispatchEvent(new CustomEvent("panmove",{detail:{x:e,y:n,dx:i,dy:r}}))}function r(o){e=o.clientX,n=o.clientY,t.dispatchEvent(new CustomEvent("panend",{detail:{x:e,y:n}})),window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",r)}function l(o){if(o.touches.length>1)return;const i=o.touches[0];e=i.clientX,n=i.clientY;const r=i.target;t.dispatchEvent(new CustomEvent("panstart",{detail:{x:e,y:n,target:r}})),window.addEventListener("touchmove",s,{passive:!1}),window.addEventListener("touchend",a)}function s(o){if(o.preventDefault(),o.touches.length>1)return;const i=o.touches[0],r=i.clientX-e,l=i.clientY-n;e=i.clientX,n=i.clientY,t.dispatchEvent(new CustomEvent("panmove",{detail:{x:e,y:n,dx:r,dy:l}}))}function a(o){const i=o.changedTouches[0];e=i.clientX,n=i.clientY,t.dispatchEvent(new CustomEvent("panend",{detail:{x:e,y:n}})),window.removeEventListener("touchmove",s),window.removeEventListener("touchend",a)}return t.addEventListener("mousedown",o),t.addEventListener("touchstart",l),{destroy(){t.removeEventListener("mousedown",o),t.removeEventListener("touchstart",l)}}}const _t=[{name:"pdfjsLib",src:"https://unpkg.com/pdfjs-dist@2.3.200/build/pdf.min.js"},{name:"PDFLib",src:"https://unpkg.com/pdf-lib@1.4.0/dist/pdf-lib.min.js"},{name:"download",src:"https://unpkg.com/downloadjs@1.4.7"},{name:"makeTextPDF",src:"./makeTextPDF.js"}],zt={};function Ft(t){if(zt[t])return zt[t];const e=_t.find(e=>e.name===t);if(!e)throw new Error(`Script ${t} not exists.`);return Ct(e)}function Ct({name:t,src:e}){return zt[t]||(zt[t]=new Promise((n,o)=>{const i=document.createElement("script");i.src=e,i.onload=()=>{n(window[t]),console.log(t+" is loaded.")},i.onerror=()=>{o(`The script ${t} didn't load correctly.`),alert("Some scripts did not load correctly. Please reload and try again.")},document.body.appendChild(i)})),zt[t]}const Mt={Courier:{correction:(t,e)=>(t*e-t)/2+t/6},Helvetica:{correction:(t,e)=>(t*e-t)/2+t/10},"Times-Roman":{correction:(t,e)=>(t*e-t)/2+t/7}},jt={...Mt,"標楷體":{src:"/CK.ttf",correction:(t,e)=>(t*e-t)/2}};function Pt(t){if(Mt[t])return Mt[t];const e=jt[t];if(!e)throw new Error(`Font '${t}' not exists.`);return Mt[t]=fetch(e.src).then(t=>t.arrayBuffer()).then(n=>{const o=new FontFace(t,n);return o.display="swap",o.load().then(()=>document.fonts.add(o)),{...e,buffer:n}}),Mt[t]}function Tt(t){return new Promise((e,n)=>{const o=new FileReader;o.onload=()=>e(o.result),o.onerror=n,o.readAsArrayBuffer(t)})}function Rt(e){let n,o,r,l,s,a,c,u;return{c(){n=x("div"),o=x("div"),o.innerHTML='<div data-direction="left" class="resize-border h-full w-1 left-0 top-0 border-l cursor-ew-resize svelte-y5b9ho"></div> \n    <div data-direction="top" class="resize-border w-full h-1 left-0 top-0 border-t cursor-ns-resize svelte-y5b9ho"></div> \n    <div data-direction="bottom" class="resize-border w-full h-1 left-0 bottom-0 border-b cursor-ns-resize svelte-y5b9ho"></div> \n    <div data-direction="right" class="resize-border h-full w-1 right-0 top-0 border-r cursor-ew-resize svelte-y5b9ho"></div> \n    <div data-direction="left-top" class="resize-corner left-0 top-0 cursor-nwse-resize transform\n      -translate-x-1/2 -translate-y-1/2 md:scale-25 svelte-y5b9ho"></div> \n    <div data-direction="right-top" class="resize-corner right-0 top-0 cursor-nesw-resize transform\n      translate-x-1/2 -translate-y-1/2 md:scale-25 svelte-y5b9ho"></div> \n    <div data-direction="left-bottom" class="resize-corner left-0 bottom-0 cursor-nesw-resize transform\n      -translate-x-1/2 translate-y-1/2 md:scale-25 svelte-y5b9ho"></div> \n    <div data-direction="right-bottom" class="resize-corner right-0 bottom-0 cursor-nwse-resize transform\n      translate-x-1/2 translate-y-1/2 md:scale-25 svelte-y5b9ho"></div>',l=E(),s=x("div"),s.innerHTML='<img class="w-full h-full" src="./delete.svg" alt="delete object">',a=E(),c=x("canvas"),S(o,"class","absolute w-full h-full cursor-grab svelte-y5b9ho"),j(o,"cursor-grabbing","move"===e[5]),j(o,"operation",e[5]),S(s,"class","absolute left-0 top-0 right-0 w-12 h-12 m-auto rounded-full bg-white\n    cursor-pointer transform -translate-y-1/2 md:scale-25"),S(c,"class","w-full h-full"),S(n,"class","absolute left-0 top-0 select-none"),C(n,"width",e[0]+e[8]+"px"),C(n,"height",e[1]+e[9]+"px"),C(n,"transform","translate("+(e[2]+e[6])+"px,\n  "+(e[3]+e[7])+"px)")},m(t,f,h){y(t,n,f),w(n,o),w(n,l),w(n,s),w(n,a),w(n,c),e[22](c),h&&i(u),u=[d(r=St.call(null,o)),k(o,"panstart",e[12]),k(o,"panmove",e[10]),k(o,"panend",e[11]),k(s,"click",e[13])]},p(t,[e]){32&e&&j(o,"cursor-grabbing","move"===t[5]),32&e&&j(o,"operation",t[5]),257&e&&C(n,"width",t[0]+t[8]+"px"),514&e&&C(n,"height",t[1]+t[9]+"px"),204&e&&C(n,"transform","translate("+(t[2]+t[6])+"px,\n  "+(t[3]+t[7])+"px)")},i:t,o:t,d(t){t&&v(n),e[22](null),i(u)}}}function At(t,e,n){let{payload:o}=e,{file:i}=e,{width:r}=e,{height:l}=e,{x:s}=e,{y:a}=e,{pageScale:c=1}=e;const u=O();let d,f,h,p="",g=[],m=0,w=0,y=0,v=0;async function x(){n(4,h.width=r,h),n(4,h.height=l,h),h.getContext("2d").drawImage(o,0,0);let t=1;r>500&&(t=500/r),l>500&&(t=Math.min(t,500/l)),u("update",{width:r*t,height:l*t}),["image/jpeg","image/png"].includes(i.type)||h.toBlob(t=>{u("update",{file:t})})}return B(x),t.$set=t=>{"payload"in t&&n(14,o=t.payload),"file"in t&&n(15,i=t.file),"width"in t&&n(0,r=t.width),"height"in t&&n(1,l=t.height),"x"in t&&n(2,s=t.x),"y"in t&&n(3,a=t.y),"pageScale"in t&&n(16,c=t.pageScale)},[r,l,s,a,h,p,m,w,y,v,function(t){const e=(t.detail.x-d)/c,o=(t.detail.y-f)/c;"move"===p?(n(6,m=e),n(7,w=o)):"scale"===p&&(g.includes("left")&&(n(6,m=e),n(8,y=-e)),g.includes("top")&&(n(7,w=o),n(9,v=-o)),g.includes("right")&&n(8,y=e),g.includes("bottom")&&n(9,v=o))},function(t){"move"===p?(u("update",{x:s+m,y:a+w}),n(6,m=0),n(7,w=0)):"scale"===p&&(u("update",{x:s+m,y:a+w,width:r+y,height:l+v}),n(6,m=0),n(7,w=0),n(8,y=0),n(9,v=0),g=[]),n(5,p="")},function(t){if(d=t.detail.x,f=t.detail.y,t.detail.target===t.currentTarget)return n(5,p="move");n(5,p="scale"),g=t.detail.target.dataset.direction.split("-")},function(){u("delete")},o,i,c,d,f,g,u,x,function(t){G[t?"unshift":"push"](()=>{n(4,h=t)})}]}class Dt extends xt{constructor(t){super(),vt(this,t,At,Rt,s,{payload:14,file:15,width:0,height:1,x:2,y:3,pageScale:16})}}function It(t){let e,n;const o=t[2].default,i=a(o,t,t[1],null);return{c(){e=x("div"),i&&i.c()},m(o,r){y(o,e,r),i&&i.m(e,null),t[3](e),n=!0},p(t,[e]){i&&i.p&&2&e&&i.p(c(o,t,t[1],null),u(o,t[1],e,null))},i(t){n||(at(i,t),n=!0)},o(t){ct(i,t),n=!1},d(n){n&&v(e),i&&i.d(n),t[3](null)}}}function Nt(t,e,n){let o,{$$slots:i={},$$scope:r}=e;return t.$set=t=>{"$$scope"in t&&n(1,r=t.$$scope)},t.$$.update=()=>{1&t.$$.dirty&&o&&document.body.appendChild(o)},[o,r,i,function(t){G[t?"unshift":"push"](()=>{n(0,o=t)})}]}class Wt extends xt{constructor(t){super(),vt(this,t,Nt,It,l,{})}}function Bt(t){let e,n;const o=t[0].default,i=a(o,t,t[1],null);return{c(){e=x("div"),i&&i.c(),S(e,"class","fixed z-10 top-0 left-0 right-0 h-12")},m(t,o){y(t,e,o),i&&i.m(e,null),n=!0},p(t,e){i&&i.p&&2&e&&i.p(c(o,t,t[1],null),u(o,t[1],e,null))},i(t){n||(at(i,t),n=!0)},o(t){ct(i,t),n=!1},d(t){t&&v(e),i&&i.d(t)}}}function Ot(t){let e;const n=new Wt({props:{$$slots:{default:[Bt]},$$scope:{ctx:t}}});return{c(){gt(n.$$.fragment)},m(t,o){mt(n,t,o),e=!0},p(t,[e]){const o={};2&e&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){e||(at(n.$$.fragment,t),e=!0)},o(t){ct(n.$$.fragment,t),e=!1},d(t){wt(n,t)}}}function Xt(t,e,n){let{$$slots:o={},$$scope:i}=e;return t.$set=t=>{"$$scope"in t&&n(1,i=t.$$scope)},[o,i]}class Yt extends xt{constructor(t){super(),vt(this,t,Xt,Ot,l,{})}}function Gt(t){function e(e){Array.from(e.touches).some(e=>t.contains(e.target))||t.dispatchEvent(new CustomEvent("tapout"))}function n(e){t.contains(e.target)||t.dispatchEvent(new CustomEvent("tapout"))}return window.addEventListener("touchstart",e),window.addEventListener("mousedown",n),{destroy(){window.removeEventListener("touchstart",e),window.removeEventListener("mousedown",n)}}}const Ut=()=>{};function Jt(t,e,n){const o=t.slice();return o[36]=e[n],o}function Zt(t){let e;const n=new Yt({props:{$$slots:{default:[qt]},$$scope:{ctx:t}}});return{c(){gt(n.$$.fragment)},m(t,o){mt(n,t,o),e=!0},p(t,e){const o={};56&e[0]|256&e[1]&&(o.$$scope={dirty:e,ctx:t}),n.$set(o)},i(t){e||(at(n.$$.fragment,t),e=!0)},o(t){ct(n.$$.fragment,t),e=!1},d(t){wt(n,t)}}}function Vt(e){let n,o,i,r=e[36]+"";return{c(){n=x("option"),o=$(r),n.__value=i=e[36],n.value=n.__value},m(t,e){y(t,n,e),w(n,o)},p:t,d(t){t&&v(n)}}}function qt(t){let e,n,o,r,l,s,a,c,u,f,h,p,g,m,b,$,L,H,z,C,j,P,T,R,A,D=t[9],I=[];for(let e=0;e<D.length;e+=1)I[e]=Vt(Jt(t,D,e));return{c(){e=x("div"),n=x("div"),o=x("img"),l=E(),s=x("input"),a=E(),c=x("div"),u=x("img"),h=E(),p=x("input"),g=E(),m=x("div"),b=x("img"),L=E(),H=x("div"),z=x("select");for(let t=0;t<I.length;t+=1)I[t].c();C=E(),j=x("div"),j.innerHTML='<svg class="fill-current h-4 w-4" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757\n                6.586 4.343 8z"></path></svg>',P=E(),T=x("div"),T.innerHTML='<img class="w-full h-full" src="./delete.svg" alt="delete object">',o.src!==(r="/line_height.svg")&&S(o,"src","/line_height.svg"),S(o,"class","w-6 mr-2"),S(o,"alt","Line height"),S(s,"type","number"),S(s,"min","1"),S(s,"max","10"),S(s,"step","0.1"),S(s,"class","h-6 w-12 text-center flex-shrink-0 rounded-sm"),S(n,"class","mr-2 flex items-center"),u.src!==(f="/text.svg")&&S(u,"src","/text.svg"),S(u,"class","w-6 mr-2"),S(u,"alt","Font size"),S(p,"type","number"),S(p,"min","12"),S(p,"max","120"),S(p,"step","1"),S(p,"class","h-6 w-12 text-center flex-shrink-0 rounded-sm"),S(c,"class","mr-2 flex items-center"),b.src!==($="/text-family.svg")&&S(b,"src","/text-family.svg"),S(b,"class","w-4 mr-2"),S(b,"alt","Font family"),S(z,"class","font-family svelte-dfawvu"),void 0===t[5]&&q(()=>t[34].call(z)),S(j,"class","pointer-events-none absolute inset-y-0 right-0 flex\n            items-center px-2 text-gray-700"),S(H,"class","relative w-32 md:w-40"),S(m,"class","mr-2 flex items-center"),S(T,"class","w-5 h-5 rounded-full bg-white cursor-pointer"),S(e,"class","h-full flex justify-center items-center bg-gray-300 border-b\n      border-gray-400")},m(r,f,v){y(r,e,f),w(e,n),w(n,o),w(n,l),w(n,s),F(s,t[4]),w(e,a),w(e,c),w(c,u),w(c,h),w(c,p),F(p,t[3]),w(e,g),w(e,m),w(m,b),w(m,L),w(m,H),w(H,z);for(let t=0;t<I.length;t+=1)I[t].m(z,null);M(z,t[5]),w(H,C),w(H,j),w(e,P),w(e,T),v&&i(A),A=[k(s,"input",t[32]),k(p,"input",t[33]),k(z,"change",t[34]),k(z,"change",t[19]),k(T,"click",t[20]),d(R=Gt.call(null,e)),k(e,"tapout",t[18]),k(e,"mousedown",t[17]),k(e,"touchstart",t[17],{passive:!0})]},p(t,e){if(16&e[0]&&_(s.value)!==t[4]&&F(s,t[4]),8&e[0]&&_(p.value)!==t[3]&&F(p,t[3]),512&e[0]){let n;for(D=t[9],n=0;n<D.length;n+=1){const o=Jt(t,D,n);I[n]?I[n].p(o,e):(I[n]=Vt(o),I[n].c(),I[n].m(z,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=D.length}32&e[0]&&M(z,t[5])},d(t){t&&v(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(I,t),i(A)}}}function Qt(t){let e,n,o,r,l,s,a,c,u,f=t[8]&&Zt(t);return{c(){f&&f.c(),e=E(),n=x("div"),o=x("div"),l=E(),s=x("div"),S(o,"class","absolute w-full h-full cursor-grab border border-dotted\n    border-gray-500 svelte-dfawvu"),j(o,"cursor-grab",!t[8]),j(o,"cursor-grabbing","move"===t[8]),j(o,"editing",["edit","tool"].includes(t[8])),S(s,"contenteditable","true"),S(s,"spellcheck","false"),S(s,"class","outline-none whitespace-no-wrap"),C(s,"font-size",t[3]+"px"),C(s,"font-family","'"+t[5]+"', serif"),C(s,"line-height",t[4]),C(s,"-webkit-user-select","text"),S(n,"class","absolute left-0 top-0 select-none"),C(n,"transform","translate("+(t[0]+t[6])+"px, "+(t[1]+t[7])+"px)")},m(h,p,g){f&&f.m(h,p),y(h,e,p),y(h,n,p),w(n,o),w(n,l),w(n,s),t[35](s),c=!0,g&&i(u),u=[d(r=St.call(null,o)),k(o,"panstart",t[12]),k(o,"panmove",t[10]),k(o,"panend",t[11]),k(s,"focus",t[13]),k(s,"keydown",t[16]),k(s,"paste",H(t[15])),d(a=Gt.call(null,n)),k(n,"tapout",t[14])]},p(t,i){t[8]?f?(f.p(t,i),256&i[0]&&at(f,1)):(f=Zt(t),f.c(),at(f,1),f.m(e.parentNode,e)):f&&(lt(),ct(f,1,1,()=>{f=null}),st()),256&i[0]&&j(o,"cursor-grab",!t[8]),256&i[0]&&j(o,"cursor-grabbing","move"===t[8]),256&i[0]&&j(o,"editing",["edit","tool"].includes(t[8])),(!c||8&i[0])&&C(s,"font-size",t[3]+"px"),(!c||32&i[0])&&C(s,"font-family","'"+t[5]+"', serif"),(!c||16&i[0])&&C(s,"line-height",t[4]),(!c||195&i[0])&&C(n,"transform","translate("+(t[0]+t[6])+"px, "+(t[1]+t[7])+"px)")},i(t){c||(at(f),c=!0)},o(t){ct(f),c=!1},d(o){f&&f.d(o),o&&v(e),o&&v(n),t[35](null),i(u)}}}function Kt(t,e,n){let{size:o}=e,{text:i}=e,{lineHeight:r}=e,{x:l}=e,{y:s}=e,{fontFamily:a}=e,{pageScale:c=1}=e;const u=Object.keys(jt),d=O();let f,h,p,g=o,m=r,w=a,y=0,v=0,x="";function b(){let t;for(;t=Array.from(p.childNodes).find(t=>!["#text","BR"].includes(t.nodeName));)p.removeChild(t)}function $(){n(2,p.innerHTML=i,p),p.focus()}function E(){const t=p.childNodes,e=[];let n="";for(let o=0;o<t.length;o++){const i=t[o];"BR"===i.nodeName?(e.push(n),n=""):n+=i.textContent}return e.push(n),e}return B($),t.$set=t=>{"size"in t&&n(21,o=t.size),"text"in t&&n(22,i=t.text),"lineHeight"in t&&n(23,r=t.lineHeight),"x"in t&&n(0,l=t.x),"y"in t&&n(1,s=t.y),"fontFamily"in t&&n(24,a=t.fontFamily),"pageScale"in t&&n(25,c=t.pageScale)},[l,s,p,g,m,w,y,v,x,u,function(t){n(6,y=(t.detail.x-f)/c),n(7,v=(t.detail.y-h)/c)},function(t){if(0===y&&0===v)return p.focus();d("update",{x:l+y,y:s+v}),n(6,y=0),n(7,v=0),n(8,x="")},function(t){f=t.detail.x,h=t.detail.y,n(8,x="move")},function(){n(8,x="edit")},async function(){"edit"===x&&"tool"!==x&&(p.blur(),b(),d("update",{lines:E(),width:p.clientWidth}),n(8,x=""))},async function(t){const e=t.clipboardData.getData("text");var n;document.execCommand("insertHTML",!1,e),await new Promise(t=>setTimeout(t,n)),b()},function(t){const e=Array.from(p.childNodes);if(13===t.keyCode){t.preventDefault();const n=window.getSelection(),o=n.focusNode,i=n.focusOffset;if(o===p)p.insertBefore(document.createElement("br"),e[i]);else if(o instanceof HTMLBRElement)p.insertBefore(document.createElement("br"),o);else if(o.textContent.length!==i)document.execCommand("insertHTML",!1,"<br>");else{let t=o.nextSibling;t?p.insertBefore(document.createElement("br"),t):(t=p.appendChild(document.createElement("br")),t=p.appendChild(document.createElement("br"))),n.collapse(t,0)}}},function(){n(8,x="tool")},async function(){"tool"===x&&"edit"!==x&&(d("update",{lines:E(),lineHeight:m,size:g,fontFamily:w}),n(8,x=""))},function(){d("selectFont",{name:w})},function(){d("delete")},o,i,r,a,c,f,h,d,b,$,E,function(){m=_(this.value),n(4,m)},function(){g=_(this.value),n(3,g)},function(){w=function(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}(this),n(5,w),n(9,u)},function(t){G[t?"unshift":"push"](()=>{n(2,p=t)})}]}class te extends xt{constructor(t){super(),vt(this,t,Kt,Qt,s,{size:21,text:22,lineHeight:23,x:0,y:1,fontFamily:24,pageScale:25},[-1,-1])}}function ee(e){let n,o,r,l,s,a,c,u,f;return{c(){n=x("div"),o=x("div"),o.innerHTML='<div data-direction="left-top" class="absolute left-0 top-0 w-10 h-10 bg-green-400 rounded-full\n      cursor-nwse-resize transform -translate-x-1/2 -translate-y-1/2 md:scale-25"></div> \n    <div data-direction="right-bottom" class="absolute right-0 bottom-0 w-10 h-10 bg-green-400 rounded-full\n      cursor-nwse-resize transform translate-x-1/2 translate-y-1/2 md:scale-25"></div>',l=E(),s=x("div"),s.innerHTML='<img class="w-full h-full" src="./delete.svg" alt="delete object">',a=E(),c=b("svg"),u=b("path"),S(o,"class","absolute w-full h-full cursor-grab border border-gray-400\n    border-dashed svelte-119320q"),j(o,"cursor-grabbing","move"===e[5]),j(o,"operation",e[5]),S(s,"class","absolute left-0 top-0 right-0 w-12 h-12 m-auto rounded-full bg-white\n    cursor-pointer transform -translate-y-1/2 md:scale-25"),S(u,"stroke-width","5"),S(u,"stroke-linejoin","round"),S(u,"stroke-linecap","round"),S(u,"stroke","black"),S(u,"fill","none"),S(u,"d",e[3]),S(c,"width","100%"),S(c,"height","100%"),S(n,"class","absolute left-0 top-0 select-none"),C(n,"width",e[0]+e[8]+"px"),C(n,"height",(e[0]+e[8])/e[9]+"px"),C(n,"transform","translate("+(e[1]+e[6])+"px, "+(e[2]+e[7])+"px)")},m(t,h,p){y(t,n,h),w(n,o),w(n,l),w(n,s),w(n,a),w(n,c),w(c,u),e[22](c),p&&i(f),f=[d(r=St.call(null,o)),k(o,"panstart",e[12]),k(o,"panmove",e[10]),k(o,"panend",e[11]),k(s,"click",e[13])]},p(t,[e]){32&e&&j(o,"cursor-grabbing","move"===t[5]),32&e&&j(o,"operation",t[5]),8&e&&S(u,"d",t[3]),257&e&&C(n,"width",t[0]+t[8]+"px"),257&e&&C(n,"height",(t[0]+t[8])/t[9]+"px"),198&e&&C(n,"transform","translate("+(t[1]+t[6])+"px, "+(t[2]+t[7])+"px)")},i:t,o:t,d(t){t&&v(n),e[22](null),i(f)}}}function ne(t,e,n){let{originWidth:o}=e,{originHeight:i}=e,{width:r}=e,{x:l}=e,{y:s}=e,{pageScale:a=1}=e,{path:c}=e;const u=O();let d,f,h,p="",g=0,m=0,w=0,y="";const v=o/i;async function x(){h.setAttribute("viewBox",`0 0 ${o} ${i}`)}return B(x),t.$set=t=>{"originWidth"in t&&n(14,o=t.originWidth),"originHeight"in t&&n(15,i=t.originHeight),"width"in t&&n(0,r=t.width),"x"in t&&n(1,l=t.x),"y"in t&&n(2,s=t.y),"pageScale"in t&&n(16,a=t.pageScale),"path"in t&&n(3,c=t.path)},[r,l,s,c,h,p,g,m,w,v,function(t){const e=(t.detail.x-d)/a,o=(t.detail.y-f)/a;if("move"===p)n(6,g=e),n(7,m=o);else if("scale"===p){if("left-top"===y){let t=1/0;t=Math.min(e,o*v),n(6,g=t),n(8,w=-t),n(7,m=t/v)}if("right-bottom"===y){let t=-1/0;t=Math.max(e,o*v),n(8,w=t)}}},function(t){"move"===p?(u("update",{x:l+g,y:s+m}),n(6,g=0),n(7,m=0)):"scale"===p&&(u("update",{x:l+g,y:s+m,width:r+w,scale:(r+w)/o}),n(6,g=0),n(7,m=0),n(8,w=0),y=""),n(5,p="")},function(t){if(d=t.detail.x,f=t.detail.y,t.detail.target===t.currentTarget)return n(5,p="move");n(5,p="scale"),y=t.detail.target.dataset.direction},function(){u("delete")},o,i,a,d,f,y,u,x,function(t){G[t?"unshift":"push"](()=>{n(4,h=t)})}]}class oe extends xt{constructor(t){super(),vt(this,t,ne,ee,s,{originWidth:14,originHeight:15,width:0,x:1,y:2,pageScale:16,path:3})}}function ie(e){let n,o,r,l,s,a,c,u,f,h;return{c(){n=x("div"),o=x("div"),r=x("button"),r.textContent="Cancel",l=E(),s=x("button"),s.textContent="Done",a=E(),c=b("svg"),u=b("path"),S(r,"class"," w-24 bg-red-500 hover:bg-red-700 text-white font-bold py-1 px-4\n      rounded mr-4"),S(s,"class","w-24 bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-4\n      rounded"),S(o,"class","absolute right-0 bottom-0 mr-4 mb-4 flex"),S(u,"stroke-width","5"),S(u,"stroke-linejoin","round"),S(u,"stroke-linecap","round"),S(u,"d",e[1]),S(u,"stroke","black"),S(u,"fill","none"),S(c,"class","w-full h-full pointer-events-none"),S(n,"class","relative w-full h-full select-none")},m(t,p,g){y(t,n,p),w(n,o),w(o,r),w(o,l),w(o,s),w(n,a),w(n,c),w(c,u),e[16](n),g&&i(h),h=[k(r,"click",e[6]),k(s,"click",e[5]),d(f=St.call(null,n)),k(n,"panstart",e[2]),k(n,"panmove",e[3]),k(n,"panend",e[4])]},p(t,[e]){2&e&&S(u,"d",t[1])},i:t,o:t,d(t){t&&v(n),e[16](null),i(h)}}}function re(t,e,n){const o=O();let i,r=0,l=0,s="",a=1/0,c=0,u=1/0,d=0,f=[],h=!1;return[i,s,function(t){if(t.detail.target!==i)return h=!1;h=!0,r=t.detail.x,l=t.detail.y,a=Math.min(a,r),c=Math.max(c,r),u=Math.min(u,l),d=Math.max(d,l),f.push(["M",r,l]),n(1,s+=`M${r},${l}`)},function(t){h&&(r=t.detail.x,l=t.detail.y,a=Math.min(a,r),c=Math.max(c,r),u=Math.min(u,l),d=Math.max(d,l),f.push(["L",r,l]),n(1,s+=`L${r},${l}`))},function(){h=!1},function(){if(!f.length)return;const t=-(a-10),e=-(u-10);o("finish",{originWidth:c-a+20,originHeight:d-u+20,path:f.reduce((n,o)=>n+o[0]+(o[1]+t)+","+(o[2]+e),"")})},function(){o("cancel")},r,l,a,c,u,d,h,o,f,function(t){G[t?"unshift":"push"](()=>{n(0,i=t)})}]}class le extends xt{constructor(t){super(),vt(this,t,re,ie,l,{})}}const{window:se}=ft;function ae(t,e,n){const o=t.slice();return o[45]=e[n],o}function ce(t,e,n){const o=t.slice();return o[42]=e[n],o[44]=n,o}function ue(e){let n,o,i;const r=new le({});return r.$on("finish",e[30]),r.$on("cancel",e[31]),{c(){n=x("div"),gt(r.$$.fragment),S(n,"class","fixed z-10 top-0 left-0 right-0 border-b border-gray-300 bg-white\n      shadow-lg"),C(n,"height","50%")},m(t,e){y(t,n,e),mt(r,n,null),i=!0},p:t,i(t){i||(at(r.$$.fragment,t),q(()=>{o||(o=dt(n,$t,{y:-200,duration:500},!0)),o.run(1)}),i=!0)},o(t){ct(r.$$.fragment,t),o||(o=dt(n,$t,{y:-200,duration:500},!1)),o.run(0),i=!1},d(t){t&&v(n),wt(r),t&&o&&o.end()}}}function de(e){let n;return{c(){n=x("div"),n.innerHTML='<span class=" font-bold text-3xl text-gray-500">Drag something here</span>',S(n,"class","w-full flex-grow flex justify-center items-center")},m(t,e){y(t,n,e)},p:t,i:t,o:t,d(t){t&&v(n)}}}function fe(t){let e,n,o,i,r,l,s,a,c,u,d,f=(console.log(t[4]),""),h=[],p=new Map,g=t[2];const m=t=>t[42];for(let e=0;e<g.length;e+=1){let n=ce(t,g,e),o=m(n);p.set(o,h[e]=we(o,n))}return{c(){e=x("div"),n=x("img"),i=E(),r=x("input"),l=E(),s=$(f),a=E(),c=x("div");for(let t=0;t<h.length;t+=1)h[t].c();n.src!==(o="/edit.svg")&&S(n,"src","/edit.svg"),S(n,"class","mr-2"),S(n,"alt","a pen, edit pdf name"),S(r,"placeholder","Rename your PDF here"),S(r,"type","text"),S(r,"class","flex-grow bg-transparent"),S(e,"class","flex justify-center px-5 w-full md:hidden"),S(c,"class","w-full")},m(o,f,p){y(o,e,f),w(e,n),w(e,i),w(e,r),F(r,t[1]),w(e,l),w(e,s),y(o,a,f),y(o,c,f);for(let t=0;t<h.length;t+=1)h[t].m(c,null);u=!0,p&&d(),d=k(r,"input",t[32])},p(t,e){if(2&e[0]&&r.value!==t[1]&&F(r,t[1]),(!u||16&e[0])&&f!==(console.log(t[4]),f="")&&z(s,f),254012&e[0]){const n=t[2];lt(),h=pt(h,e,m,1,t,n,p,c,ht,we,null,ce),st()}},i(t){if(!u){for(let t=0;t<g.length;t+=1)at(h[t]);u=!0}},o(t){for(let t=0;t<h.length;t+=1)ct(h[t]);u=!1},d(t){t&&v(e),t&&v(a),t&&v(c);for(let t=0;t<h.length;t+=1)h[t].d();d()}}}function he(t){let e;const n=new oe({props:{path:t[45].path,x:t[45].x,y:t[45].y,width:t[45].width,originWidth:t[45].originWidth,originHeight:t[45].originHeight,pageScale:t[3][t[44]]}});return n.$on("update",(function(...e){return t[38](t[45],...e)})),n.$on("delete",(function(...e){return t[39](t[45],...e)})),{c(){gt(n.$$.fragment)},m(t,o){mt(n,t,o),e=!0},p(e,o){t=e;const i={};20&o[0]&&(i.path=t[45].path),20&o[0]&&(i.x=t[45].x),20&o[0]&&(i.y=t[45].y),20&o[0]&&(i.width=t[45].width),20&o[0]&&(i.originWidth=t[45].originWidth),20&o[0]&&(i.originHeight=t[45].originHeight),12&o[0]&&(i.pageScale=t[3][t[44]]),n.$set(i)},i(t){e||(at(n.$$.fragment,t),e=!0)},o(t){ct(n.$$.fragment,t),e=!1},d(t){wt(n,t)}}}function pe(t){let e;const n=new te({props:{text:t[45].text,x:t[45].x,y:t[45].y,size:t[45].size,lineHeight:t[45].lineHeight,fontFamily:t[45].fontFamily,pageScale:t[3][t[44]]}});return n.$on("update",(function(...e){return t[36](t[45],...e)})),n.$on("delete",(function(...e){return t[37](t[45],...e)})),n.$on("selectFont",t[13]),{c(){gt(n.$$.fragment)},m(t,o){mt(n,t,o),e=!0},p(e,o){t=e;const i={};20&o[0]&&(i.text=t[45].text),20&o[0]&&(i.x=t[45].x),20&o[0]&&(i.y=t[45].y),20&o[0]&&(i.size=t[45].size),20&o[0]&&(i.lineHeight=t[45].lineHeight),20&o[0]&&(i.fontFamily=t[45].fontFamily),12&o[0]&&(i.pageScale=t[3][t[44]]),n.$set(i)},i(t){e||(at(n.$$.fragment,t),e=!0)},o(t){ct(n.$$.fragment,t),e=!1},d(t){wt(n,t)}}}function ge(t){let e;const n=new Dt({props:{file:t[45].file,payload:t[45].payload,x:t[45].x,y:t[45].y,width:t[45].width,height:t[45].height,pageScale:t[3][t[44]]}});return n.$on("update",(function(...e){return t[34](t[45],...e)})),n.$on("delete",(function(...e){return t[35](t[45],...e)})),{c(){gt(n.$$.fragment)},m(t,o){mt(n,t,o),e=!0},p(e,o){t=e;const i={};20&o[0]&&(i.file=t[45].file),20&o[0]&&(i.payload=t[45].payload),20&o[0]&&(i.x=t[45].x),20&o[0]&&(i.y=t[45].y),20&o[0]&&(i.width=t[45].width),20&o[0]&&(i.height=t[45].height),12&o[0]&&(i.pageScale=t[3][t[44]]),n.$set(i)},i(t){e||(at(n.$$.fragment,t),e=!0)},o(t){ct(n.$$.fragment,t),e=!1},d(t){wt(n,t)}}}function me(t,e){let n,o,i,r,l;const s=[ge,pe,he],a=[];function c(t,e){return"image"===t[45].type?0:"text"===t[45].type?1:"drawing"===t[45].type?2:-1}return~(o=c(e))&&(i=a[o]=s[o](e)),{key:t,first:null,c(){n=L(),i&&i.c(),r=L(),this.first=n},m(t,e){y(t,n,e),~o&&a[o].m(t,e),y(t,r,e),l=!0},p(t,e){let n=o;o=c(t),o===n?~o&&a[o].p(t,e):(i&&(lt(),ct(a[n],1,1,()=>{a[n]=null}),st()),~o?(i=a[o],i||(i=a[o]=s[o](t),i.c()),at(i,1),i.m(r.parentNode,r)):i=null)},i(t){l||(at(i),l=!0)},o(t){ct(i),l=!1},d(t){t&&v(n),~o&&a[o].d(t),t&&v(r)}}}function we(t,e){let n,o,r,l,s,a,c,u=[],d=new Map;const f=new Ht({props:{page:e[42]}});f.$on("measure",(function(...t){return e[33](e[44],...t)}));let h=e[4][e[44]];const p=t=>t[45].id;for(let t=0;t<h.length;t+=1){let n=ae(e,h,t),o=p(n);d.set(o,u[t]=me(o,n))}function g(...t){return e[40](e[44],...t)}function m(...t){return e[41](e[44],...t)}return{key:t,first:null,c(){n=x("div"),o=x("div"),gt(f.$$.fragment),r=E(),l=x("div");for(let t=0;t<u.length;t+=1)u[t].c();s=E(),S(l,"class","absolute top-0 left-0 transform origin-top-left"),C(l,"transform","scale("+e[3][e[44]]+")"),C(l,"touch-action","none"),S(o,"class","relative shadow-lg"),j(o,"shadow-outline",e[44]===e[5]),S(n,"class","p-5 w-full flex flex-col items-center overflow-hidden"),this.first=n},m(t,e,d){y(t,n,e),w(n,o),mt(f,o,null),w(o,r),w(o,l);for(let t=0;t<u.length;t+=1)u[t].m(l,null);w(n,s),a=!0,d&&i(c),c=[k(n,"mousedown",g),k(n,"touchstart",m,{passive:!0})]},p(t,n){e=t;const i={};if(4&n[0]&&(i.page=e[42]),f.$set(i),106524&n[0]){const t=e[4][e[44]];lt(),u=pt(u,n,p,1,e,t,d,l,ht,me,null,ae),st()}(!a||12&n[0])&&C(l,"transform","scale("+e[3][e[44]]+")"),36&n[0]&&j(o,"shadow-outline",e[44]===e[5])},i(t){if(!a){at(f.$$.fragment,t);for(let t=0;t<h.length;t+=1)at(u[t]);a=!0}},o(t){ct(f.$$.fragment,t);for(let t=0;t<u.length;t+=1)ct(u[t]);a=!1},d(t){t&&v(n),wt(f);for(let t=0;t<u.length;t+=1)u[t].d();i(c)}}}function ye(t){let e,n,o,r,l,s,a,c,u,d,f,h,p,g,m,b,L,_,C,M,P,T,R,A,D,I,N,W,B,O,X,Y,G,U,J=t[6]?"Saving":"Save";const Z=new Et({});let V=t[7]&&ue(t);const q=[fe,de],Q=[];function K(t,e){return t[2].length?0:1}return X=K(t),Y=Q[X]=q[X](t),{c(){gt(Z.$$.fragment),e=E(),n=x("main"),o=x("style"),o.textContent=".fixed > .h-full {\n  display:none !important\n}\n  \n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9BcHAuc3ZlbHRlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBO0VBQWtCO0FBQXVCIiwiZmlsZSI6InNyYy9BcHAuc3ZlbHRlIiwic291cmNlc0NvbnRlbnQiOlsiXG4uZml4ZWQgPiAuaC1mdWxsIHtkaXNwbGF5Om5vbmUgIWltcG9ydGFudH1cbiAgIl19 */",r=E(),l=x("div"),s=x("input"),a=E(),c=x("input"),u=E(),d=x("label"),d.textContent="Choose PDF",f=E(),h=x("div"),p=x("label"),p.innerHTML='<img src="image.svg" alt="An icon for adding images">',g=E(),m=x("label"),m.innerHTML='<img src="notes.svg" alt="An icon for adding text">',b=E(),L=x("label"),L.innerHTML='<img src="gesture.svg" alt="An icon for adding drawing">',_=E(),C=x("div"),M=x("img"),T=E(),R=x("input"),A=E(),D=x("button"),I=$(J),N=E(),W=x("a"),W.innerHTML='<img src="./GitHub-Mark-32px.png" alt="A GitHub icon leads to personal GitHub page">',B=E(),V&&V.c(),O=E(),Y.c(),S(s,"type","file"),S(s,"name","pdf"),S(s,"id","pdf"),S(s,"class","hidden"),S(c,"type","file"),S(c,"id","image"),S(c,"name","image"),S(c,"class","hidden"),S(d,"class","whitespace-no-wrap bg-blue-500 hover:bg-blue-700 text-white\n      font-bold py-1 px-3 md:px-4 rounded mr-3 cursor-pointer md:mr-4"),S(d,"for","pdf"),S(p,"class","flex items-center justify-center h-full w-8 hover:bg-gray-500\n        cursor-pointer"),S(p,"for","image"),j(p,"cursor-not-allowed",t[5]<0),j(p,"bg-gray-500",t[5]<0),S(m,"class","flex items-center justify-center h-full w-8 hover:bg-gray-500\n        cursor-pointer"),S(m,"for","text"),j(m,"cursor-not-allowed",t[5]<0),j(m,"bg-gray-500",t[5]<0),S(L,"class","flex items-center justify-center h-full w-8 hover:bg-gray-500\n        cursor-pointer"),j(L,"cursor-not-allowed",t[5]<0),j(L,"bg-gray-500",t[5]<0),S(h,"class","relative mr-3 flex h-8 bg-gray-400 rounded-sm overflow-hidden\n      md:mr-4"),M.src!==(P="/edit.svg")&&S(M,"src","/edit.svg"),S(M,"class","mr-2"),S(M,"alt","a pen, edit pdf name"),S(R,"placeholder","Rename your PDF here"),S(R,"type","text"),S(R,"class","flex-grow bg-transparent"),S(C,"class","justify-center mr-3 md:mr-4 w-full max-w-xs hidden md:flex"),S(D,"class","w-20 bg-blue-500 hover:bg-blue-700 text-white font-bold py-1 px-3\n      md:px-4 mr-3 md:mr-4 rounded"),j(D,"cursor-not-allowed",0===t[2].length||t[6]||!t[0]),j(D,"bg-blue-700",0===t[2].length||t[6]||!t[0]),S(W,"href","https://github.com/ShizukuIchi/pdf-editor"),S(l,"class","fixed z-10 top-0 left-0 right-0 h-12 flex justify-center items-center\n    bg-gray-200 border-b border-gray-300"),S(n,"class","flex flex-col items-center py-16 bg-gray-100 min-h-screen")},m(v,x,$){mt(Z,v,x),y(v,e,x),y(v,n,x),w(n,o),w(n,r),w(n,l),w(l,s),w(l,a),w(l,c),w(l,u),w(l,d),w(l,f),w(l,h),w(h,p),w(h,g),w(h,m),w(h,b),w(h,L),w(l,_),w(l,C),w(C,M),w(C,T),w(C,R),F(R,t[1]),w(l,A),w(l,D),w(D,I),w(l,N),w(l,W),w(n,B),V&&V.m(n,null),w(n,O),Q[X].m(n,null),G=!0,$&&i(U),U=[k(se,"dragenter",H(t[27])),k(se,"dragover",H(t[28])),k(se,"drop",H(t[8])),k(s,"change",t[8]),k(c,"change",t[9]),k(m,"click",t[10]),k(L,"click",t[11]),k(R,"input",t[29]),k(D,"click",t[18])]},p(t,e){32&e[0]&&j(p,"cursor-not-allowed",t[5]<0),32&e[0]&&j(p,"bg-gray-500",t[5]<0),32&e[0]&&j(m,"cursor-not-allowed",t[5]<0),32&e[0]&&j(m,"bg-gray-500",t[5]<0),32&e[0]&&j(L,"cursor-not-allowed",t[5]<0),32&e[0]&&j(L,"bg-gray-500",t[5]<0),2&e[0]&&R.value!==t[1]&&F(R,t[1]),(!G||64&e[0])&&J!==(J=t[6]?"Saving":"Save")&&z(I,J),69&e[0]&&j(D,"cursor-not-allowed",0===t[2].length||t[6]||!t[0]),69&e[0]&&j(D,"bg-blue-700",0===t[2].length||t[6]||!t[0]),t[7]?V?(V.p(t,e),128&e[0]&&at(V,1)):(V=ue(t),V.c(),at(V,1),V.m(n,O)):V&&(lt(),ct(V,1,1,()=>{V=null}),st());let o=X;X=K(t),X===o?Q[X].p(t,e):(lt(),ct(Q[o],1,1,()=>{Q[o]=null}),st(),Y=Q[X],Y||(Y=Q[X]=q[X](t),Y.c()),at(Y,1),Y.m(n,null))},i(t){G||(at(Z.$$.fragment,t),at(V),at(Y),G=!0)},o(t){ct(Z.$$.fragment,t),ct(V),ct(Y),G=!1},d(t){wt(Z,t),t&&v(e),t&&v(n),V&&V.d(),Q[X].d(),i(U)}}}function ve(t,e,n){const o=function(){let t=0;return function(){return t++}}();let i,r="",l=[],s=[],a="Helvetica",c=[],u=-1,d=!1,f=!1;async function h(){if("true"==new URLSearchParams(window.location.search).get("ls")){const t=localStorage.getItem("file"),e=await fetch(t),o=await e.blob();return console.log("pdfbblobb",o),await g(o),n(5,u=0),void p()}const t=await fetch("/test.pdf"),e=await t.blob();await g(e),n(5,u=0)}function p(){if("true"==new URLSearchParams(window.location.search).get("ls")){JSON.parse(localStorage.getItem("fields")).field.forEach(t=>{console.log(t),""!=t.text&&y(parseInt(t.id),t.text.replace(/([^>])\n/g,"$1<br/>"),parseInt(t.x),parseInt(t.y))});const t=localStorage.getItem("filename");n(1,r=t),document.querySelector(".fixed .h-full").style.display="none !important"}else for(let t=0;t<fields.length;t++)fields[t].id=111110+t,y(fields[t].id,fields[t].text,fields[t].x,fields[t].y)}async function g(t){try{const e=await async function(t){const e=await Ft("pdfjsLib"),n=new Blob([t]),o=window.URL.createObjectURL(n);return e.getDocument(o).promise}(t);n(1,r=t.name),n(0,i=t);const o=e.numPages;n(2,l=Array(o).fill().map((t,n)=>e.getPage(n+1))),n(4,c=l.map(()=>[])),n(3,s=Array(o).fill(1))}catch(t){throw console.log("Failed to add pdf."),t}}async function m(t){try{const i=await function(t){return new Promise((e,n)=>{const o=new FileReader;o.onload=()=>e(o.result),o.onerror=n,o.readAsDataURL(t)})}(t),r=await(e=i,new Promise((t,n)=>{const o=new Image;if(o.onload=()=>t(o),o.onerror=n,e instanceof Blob){const t=window.URL.createObjectURL(e);o.src=t}else o.src=e})),l=o(),{width:s,height:a}=r,d={id:l,type:"image",width:s,height:a,x:0,y:0,payload:r,file:t};n(4,c=c.map((t,e)=>e===u?[...t,d]:t))}catch(t){console.log("Fail to add image.",t)}var e}function w(t="New Text Field"){const e=o();Pt(a);const i={id:e,text:t,type:"text",size:16,width:0,lineHeight:1.4,fontFamily:a,x:0,y:0};n(4,c=c.map((t,e)=>e===u?[...t,i]:t))}function y(t,e="New Text Field",o,i){Pt(a);const r={id:t,text:e,type:"text",size:11,width:0,lineHeight:1.4,fontFamily:a,x:o,y:i};n(4,c=c.map((t,e)=>e===u?[...t,r]:t))}function v(t,e,i,r=1){const l={id:o(),path:i,type:"drawing",x:0,y:0,originWidth:t,originHeight:e,width:t*r,scale:r};n(4,c=c.map((t,e)=>e===u?[...t,l]:t))}function x(t){n(5,u=t)}function b(t,e){n(4,c=c.map((n,o)=>o==u?n.map(n=>n.id===t?{...n,...e}:n):n))}function $(t){n(4,c=c.map((e,n)=>n==u?e.filter(e=>e.id!==t):e))}function E(t,e){n(3,s[e]=t,s)}B(async()=>{try{await h(),setTimeout(()=>{Pt(a),_t.forEach(Ct)},5e3)}catch(t){console.log(t)}});return[i,r,l,s,c,u,d,f,async function(t){const e=(t.target.files||t.dataTransfer&&t.dataTransfer.files)[0];if(e&&"application/pdf"===e.type){n(5,u=-1);try{await g(e),n(5,u=0)}catch(t){console.log(t)}}},async function(t){const e=t.target.files[0];e&&u>=0&&m(e),t.target.value=null},function(){u>=0&&w()},function(){u>=0&&n(7,f=!0)},v,function(t){const e=t.detail.name;Pt(e),a=e},x,b,$,E,async function(){if(i&&!d&&l.length){n(6,d=!0);try{await async function(t,e,n){const o=await Ft("PDFLib"),i=await Ft("download"),r=await Ft("makeTextPDF");let l;try{l=await o.PDFDocument.load(await Tt(t))}catch(t){throw console.log("Failed to load PDF."),t}const s=l.getPages().map(async(t,n)=>{const i=e[n],s=t.getHeight(),a=i.map(async e=>{if("image"===e.type){let n,{file:o,x:i,y:r,width:a,height:c}=e;try{return n="image/jpeg"===o.type?await l.embedJpg(await Tt(o)):await l.embedPng(await Tt(o)),()=>t.drawImage(n,{x:i,y:s-r-c,width:a,height:c})}catch(t){return console.log("Failed to embed image.",t),Ut}}else{if("text"===e.type){let{x:n,y:o,lines:i,lineHeight:a,size:c,fontFamily:u,width:d}=e;const f=c*a*i.length,h=await Pt(u),[p]=await l.embedPdf(await r({lines:i,fontSize:c,lineHeight:a,width:d,height:f,font:h.buffer||u,dy:h.correction(c,a)}));return()=>t.drawPage(p,{width:d,height:f,x:n,y:s-o-f})}if("drawing"===e.type){let{x:n,y:i,path:r,scale:l}=e;const{pushGraphicsState:a,setLineCap:c,popGraphicsState:u,setLineJoin:d,LineCapStyle:f,LineJoinStyle:h}=o;return()=>{t.pushOperators(a(),c(f.Round),d(h.Round)),t.drawSvgPath(r,{borderWidth:5,scale:l,x:n,y:s-i}),t.pushOperators(u())}}}});(await Promise.all(a)).forEach(t=>t())});await Promise.all(s);try{i(await l.save(),n,"application/pdf")}catch(t){throw console.log("Failed to save PDF."),t}}(i,c,r)}catch(t){console.log(t)}finally{n(6,d=!1)}}},a,o,h,p,g,m,w,y,function(e){X(t,e)},function(e){X(t,e)},function(){r=this.value,n(1,r)},t=>{const{originWidth:e,originHeight:o,path:i}=t.detail;let r=1;e>500&&(r=500/e),v(e,o,i,r),n(7,f=!1)},()=>n(7,f=!1),function(){r=this.value,n(1,r)},(t,e)=>E(e.detail.scale,t),(t,e)=>b(t.id,e.detail),t=>$(t.id),(t,e)=>b(t.id,e.detail),t=>$(t.id),(t,e)=>b(t.id,e.detail),t=>$(t.id),t=>x(t),t=>x(t)]}return Ft("pdfjsLib"),new class extends xt{constructor(t){super(),vt(this,t,ve,ye,l,{},[-1,-1])}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
